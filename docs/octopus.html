<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>octopus.js</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id="background"></div>
<div id='container'>
  
  <div class='section'>
    <div class='docs'><h1>octopus.js</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      <p>Octupus.js v0.1</p>
<p>An object composition and namespacing library</p>
<p>http://octopusjs.org (Comming soon)</p>
<p>Copyright (c) 2011 Jason "Magocto" Bennett</p>
<p>Octopus may be freely distributed under the MIT license.</p>
<p>Dependencies:
<a href="http://documentcloud.github.com/underscore/">Underscore.js</a></p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>	
	<span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
	<span class="kd">var</span> <span class="nx">oldOctopus</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">Octopus</span><span class="p">;</span>
	
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <h2>Base setup</h2>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <p>Octopus namespace and _8 shortcut</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">Octopus</span><span class="p">,</span> <span class="nx">_8</span><span class="p">;</span>
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>Export for either node or window</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">Octopus</span> <span class="o">=</span> <span class="nx">_8</span> <span class="o">=</span> <span class="nx">exports</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">Octopus</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_8</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">Octopus</span> <span class="o">=</span> <span class="p">{};</span>
	<span class="p">}</span>
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>version</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">VERSION</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span><span class="p">;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <h2>Tentacles/Traits</h2>
<p>mixed in objects to provide multiple inheritance.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <p>a holder tentacle/traits</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">_traits</span> <span class="o">=</span> <span class="p">{};</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>a function to add an trait<br />params</p>
<ul>
<li>name (String) a string identifier</li>
<li>proto (Object) a object literal to hold our functionality</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">t</span> <span class="o">=</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">proto</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">name</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Octopus.t Invalid name&quot;</span>
		<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">proto</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_traits</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <p>if the tentacle has a construct function separate it to use when the main object constructor is called</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">construct</span> <span class="o">=</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">construct</span><span class="p">;</span>
		<span class="k">delete</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">construct</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_traits</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OctoTrait</span><span class="p">(</span><span class="nx">proto</span><span class="p">,</span> <span class="nx">construct</span><span class="p">);</span>		
	<span class="p">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <p>check to see if a trait has been added<br /> params</p>
<ul>
<li>name (String) a string identifier</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">hasT</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_traits</span><span class="p">[</span><span class="nx">name</span><span class="p">]);</span>
	<span class="p">}</span>
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <h2>Object Composition</h2>
<p>create object blueprint<br />params</p>
<ul>
<li>traits (String|Array[String]) a list of tentacles to add</li>
<li>proto: (object) add on to the composite objects prototype.</li>
</ul>
<p>returns composite class definition</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">spawn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">traits</span><span class="p">,</span> <span class="nx">proto</span><span class="p">)</span> <span class="p">{</span>
	
		<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">proto</span><span class="p">)</span> <span class="nx">proto</span> <span class="o">=</span> <span class="p">{};</span>
	 	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      <p>if the proto object has a construct function defined add it as our final constructor after all tentacle constructors have been called</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getBaseObj</span><span class="p">(</span><span class="nx">proto</span><span class="p">.</span><span class="nx">construct</span><span class="p">);</span>
	
		<span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">getTraitList</span><span class="p">(</span><span class="nx">traits</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">t</span><span class="p">;</span>
			<span class="k">if</span><span class="p">(</span><span class="nx">t</span> <span class="o">=</span> <span class="nx">Octopus</span><span class="p">.</span><span class="nx">_traits</span><span class="p">[</span><span class="nx">id</span><span class="p">])</span> <span class="p">{</span>
				<span class="nx">fn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_traits</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
				<span class="k">if</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">init</span><span class="p">)</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_inits</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">init</span><span class="p">);</span>
				<span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">fn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">proto</span><span class="p">);</span>
			<span class="p">}</span>  
		<span class="p">});</span>
		</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <p>remove the construct function before the other methods are added to the composite objects prototype</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">delete</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">construct</span><span class="p">;</span>
		<span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">fn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">proto</span><span class="p">);</span>
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      <p>return the composite object blueprint</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">return</span> <span class="nx">fn</span><span class="p">;</span>
	<span class="p">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <p>create and initialize <br />params</p>
<ul>
<li>traits (String) or (Array[String]) a list of tentacles to add</li>
<li>proto: (Object) add on to the composite objects prototype.</li>
<li>config: (Object) pass config object to newly constructed object</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">spawnSingle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">traits</span><span class="p">,</span> <span class="nx">proto</span><span class="p">,</span> <span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">clz</span> <span class="o">=</span> <span class="nx">Octopus</span><span class="p">.</span><span class="nx">spawn</span><span class="p">(</span><span class="nx">traits</span><span class="p">,</span> <span class="nx">proto</span><span class="p">);</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nx">clz</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
	<span class="p">}</span>
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      <p>create a new base class to graft traits on</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">_getBaseObj</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">construct</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
			 <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
	        <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_inits</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">init</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">init</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>
	        <span class="p">});</span>
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <p>fire the object constructor after all tentacles have been initialized</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	        <span class="k">this</span><span class="p">.</span><span class="nx">_useConstructor</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="nx">fn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_traits</span> <span class="o">=</span> <span class="p">[];</span>
		<span class="nx">fn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_inits</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>
		<span class="nx">fn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_useConstructor</span> <span class="o">=</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">construct</span><span class="p">))</span> <span class="o">?</span> <span class="nx">construct</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
		<span class="nx">fn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasT</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_traits</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="nx">fn</span><span class="p">;</span>
	<span class="p">}</span>
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      <h2>Namespacing</h2>
<p>a object to hold our namespaces</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">_paths</span> <span class="o">=</span> <span class="p">{};</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      <p>create, get, or append a namespace</p>
<ul>
<li>p {String} a dot delimited path</li>
<li>addon {Object} object to be added to path</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">path</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">addon</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">p</span><span class="p">))</span> <span class="k">throw</span> <span class="s2">&quot;Octopus space path must be a String&quot;</span><span class="p">;</span>
		<span class="k">return</span>  <span class="nx">Octopus</span><span class="p">.</span><span class="nx">_getPathObj</span><span class="p">(</span><span class="nx">Octopus</span><span class="p">.</span><span class="nx">_paths</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span> <span class="nx">addon</span><span class="p">);</span>
	<span class="p">}</span>
	
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      <p>recurse though namespace and get/create/append </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">_getPathObj</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">parts</span><span class="p">,</span> <span class="nx">addon</span><span class="p">)</span> <span class="p">{</span>
		
		<span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
		<span class="kd">var</span>	<span class="nx">current</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      <p>create a new path object if needed</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">current</span><span class="p">)</span> <span class="nx">parent</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">current</span> <span class="o">=</span> <span class="p">{};</span>
			</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      <p>continue traversing the path</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">if</span><span class="p">(</span><span class="nx">parts</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">Octopus</span><span class="p">.</span><span class="nx">_getPathObj</span><span class="p">(</span><span class="nx">current</span><span class="p">,</span> <span class="nx">parts</span><span class="p">,</span> <span class="nx">addon</span><span class="p">);</span>
			</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      <p>do any appending</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">if</span> <span class="p">(</span><span class="nx">addon</span><span class="p">)</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">current</span><span class="p">,</span> <span class="nx">addon</span><span class="p">);</span>
		  </pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      <p>always return an object </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">return</span> <span class="nx">current</span><span class="p">;</span>
	<span class="p">}</span>
	

	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      <h2>Dependency Injection</h2>
<p>run a anonymous function with Octopus.paths imported into the function scope</p>
<ul>
<li>imports (Object) a object in the form of importname:importpath</li>
<li>action (Function) a function to run in injected scope</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">go</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">imports</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">{</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-25'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-25'>#</a>
      </div>
      <p>create a empty function to hold scope</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{});</span>
		</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-26'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-26'>#</a>
      </div>
      <p>attach all the import paths to the scope</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">imports</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">scope</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Octopus</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
		<span class="p">});</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-27'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-27'>#</a>
      </div>
      <p>run the anonymous function in the scope</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">action</span><span class="p">))</span> <span class="nx">action</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
	<span class="p">}</span>
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-28'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-28'>#</a>
      </div>
      <h2>Utils</h2>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-29'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-29'>#</a>
      </div>
      <p>a noCoflict so we can play nicely with other octopi</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">noConflict</span> <span class="o">=</span>  <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">root</span><span class="p">.</span><span class="nx">Octopus</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_8</span> <span class="o">=</span> <span class="nx">oldOctopus</span><span class="p">;</span>
		<span class="k">return</span> <span class="nx">Octopus</span><span class="p">;</span>
	<span class="p">}</span>
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-30'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-30'>#</a>
      </div>
      <p>extend the Octopus namespace and add functionality to Octopus itself</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="nx">Octopus</span><span class="p">.</span><span class="nx">learn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ext</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">functions</span><span class="p">(</span><span class="nx">ext</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
			<span class="nx">Octopus</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ext</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
	    <span class="p">});</span>
	<span class="p">};</span>
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-31'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-31'>#</a>
      </div>
      <h2>Helpers</h2>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-32'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-32'>#</a>
      </div>
      <p>a little fly weight obj to hold traits</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">OctoTrait</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">proto</span><span class="p">,</span> <span class="nx">init</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">proto</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">proto</span><span class="p">)</span> <span class="o">?</span> <span class="p">{}</span> <span class="o">:</span> <span class="nx">proto</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="nx">init</span><span class="p">;</span>
	<span class="p">}</span>
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-33'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-33'>#</a>
      </div>
      <p>returns an array of trait ids from either a comma delimited string or an array of strings</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">getTraitList</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">traits</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">traits</span><span class="p">))</span> <span class="k">return</span> <span class="nx">traits</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">traits</span><span class="p">))</span> <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">traits</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">trim</span><span class="p">(</span><span class="nx">t</span><span class="p">)});</span>
		<span class="k">return</span> <span class="p">[];</span>
	<span class="p">}</span> 
	</pre></div>
    </div>
  </div>
  <div class='clearall'></div><div class='section' id='section-34'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-34'>#</a>
      </div>
      <p>string trim</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">trim</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">str</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\s*([\S\s]*?)\s*$/</span><span class="p">,</span> <span class="s1">&#39;$1&#39;</span><span class="p">);</span>
	<span class="p">}</span>

<span class="p">})();</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
